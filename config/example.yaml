# SDP Common Package Configuration Example
# This is a complete example showing all available configuration options

# Component configuration - identifies the SDP component type
component:
  type: controller              # controller, ih, or ah
  id: ctrl-prod-001            # unique component identifier
  name: Production Controller  # human-readable name
  version: v1.0.0              # component version

# TLS configuration - mutual TLS authentication
tls:
  cert_file: /path/to/cert.pem    # component certificate
  key_file: /path/to/key.pem      # private key
  ca_file: /path/to/ca.pem        # CA certificate for verification
  min_version: TLS1.2             # minimum TLS version (TLS1.2 or TLS1.3)

# Authentication configuration
auth:
  token_ttl: 3600s                # session token time-to-live
  device_validation: true         # enable device health checks
  mfa_required: false             # require multi-factor authentication

# Policy engine configuration
policy:
  engine: embedded                # embedded or external
  endpoint: ""                    # external policy engine endpoint (if engine=external)
  # endpoint: "http://opa-server:8181/v1/data/sdp/policy"

# Logging configuration
logging:
  level: info                     # debug, info, warn, error
  format: json                    # json or text
  output: stdout                  # stdout or file
  audit_file: /var/log/sdp/audit.log  # audit log file path

# Transport layer configuration
transport:
  # HTTP REST API (control plane - default)
  http_addr: ":8080"              # HTTP server listen address
  
  # gRPC API (control plane - optional)
  grpc_addr: ":8081"              # gRPC server listen address
  enable_grpc: false              # enable gRPC server
  
  # TCP Proxy (data plane - fixed)
  tcp_proxy_addr: ":9443"         # TCP proxy listen address
  
  # SSE configuration (real-time notifications)
  sse_heartbeat: 30s              # SSE heartbeat interval
  
  # Timeouts
  read_timeout: 15s               # HTTP/gRPC read timeout
  write_timeout: 15s              # HTTP/gRPC write timeout
  idle_timeout: 60s               # connection idle timeout

# ---
# Configuration Examples for Different Component Types
# ---

# Example 1: IH (Initiating Host) Client Configuration
# component:
#   type: ih
#   id: ih-laptop-001
#   name: Employee Laptop
#   version: v1.0.0
# tls:
#   cert_file: /etc/sdp/ih-cert.pem
#   key_file: /etc/sdp/ih-key.pem
#   ca_file: /etc/sdp/ca.pem
# auth:
#   token_ttl: 1800s
# logging:
#   level: info
#   format: text
#   output: file
#   audit_file: /var/log/sdp-client.log

# Example 2: AH (Accepting Host) Agent Configuration
# component:
#   type: ah
#   id: ah-webserver-001
#   name: Web Server Agent
#   version: v1.0.0
# tls:
#   cert_file: /etc/sdp/ah-cert.pem
#   key_file: /etc/sdp/ah-key.pem
#   ca_file: /etc/sdp/ca.pem
# logging:
#   level: warn
#   format: json
#   output: stdout
# transport:
#   tcp_proxy_addr: ":9443"
